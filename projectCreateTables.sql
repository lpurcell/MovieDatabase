DROP TABLE STAR_AWARDS;
DROP TABLE DIR_AWARDS;
DROP TABLE RENTED;
DROP TABLE INVOICE;
DROP TABLE MOVIES;
DROP TABLE DIRECTORS;
DROP TABLE STARS;
DROP TABLE CATEGORY;
DROP TABLE COUNTRY;
DROP TABLE CUSTOMERS;

CREATE TABLE CUSTOMERS(
	CUST_ID		CHAR(6), 
	CUST_LNAME	VARCHAR(15)	NOT NULL,
	CUST_FNAME	VARCHAR(15)	NOT NULL,
	ADDRESS		VARCHAR(25)	NOT NULL,
	CITY		VARCHAR(15)	NOT NULL,
	STATE		CHAR(2)		NOT NULL,
	ZIP_CODE	CHAR(5)		NOT NULL,
	PHONE		CHAR(12)	NOT NULL,
	CUST_EMAIL	VARCHAR(20)	NOT NULL,
	PRIMARY KEY(CUST_ID),
	CONSTRAINT CUSTOMERS_CK1 CHECK(STATE = ANY('AL','AK','AZ','AR','CA','CO','CT','DE','FL','GA','HI','ID','IL','IN','IA','KS','KY','LA','ME','MD','MA','MI','MN','MS','MO','MT','NE','NV','NH','NJ','NM','NY','NC','ND','OH',
'OK','OR','PA','RI','SC','SD','TN','TX','UT','VT','VA','WA','WV','WI','WY'))
);

INSERT INTO CUSTOMERS
VALUES(400001,'SCHNEIDER','ERIC','123 MAIN','FORT DODGE','IA','64506','816-123-4567','ERIC@ERIC.COM');

INSERT INTO CUSTOMERS
VALUES(400002,'GIFFIN','KRISTIN','80 HARRINGTON','GOWER','MO','64507','816-321-9876','KRISTIN@KRISTIN.COM');

INSERT INTO CUSTOMERS
VALUES(400003,'DERR','PATTI','5050 FARAON','SAVANNAH','MO','64485','660-987-9876','PATTID@PATTID.COM');



CREATE TABLE COUNTRY(
	CNTRY_ID	CHAR(3),
	CNTRY_NAME	VARCHAR(20)	NOT NULL,
	PRIMARY KEY(CNTRY_ID)
);
INSERT INTO COUNTRY
VALUES ('101', 'UNITED STATES');

INSERT INTO COUNTRY
VALUES ('102', 'CHINA');

INSERT INTO COUNTRY
VALUES ('103', 'FRANCE');



CREATE TABLE CATEGORY(
	CATGRY_ID	CHAR(3),
	CATGRY_NAME	VARCHAR(20) 	NOT NULL,
	PRIMARY KEY(CATGRY_ID)
);

INSERT INTO CATEGORY
VALUES ('201', 'Sci-fi');

INSERT INTO CATEGORY
VALUES ('202', 'ROMANCE');

INSERT INTO CATEGORY
VALUES ('203', 'ACTION');



CREATE TABLE DIRECTORS(
	DIR_ID		CHAR(6),
	DIR_LNAME	VARCHAR(15)	NOT NULL,
	DIR_FNAME	VARCHAR(15)	NOT NULL,
	DIR_BDATE	DATE		NOT NULL,
	DIR_DDATE	DATE		NULL,
	DIR_GENDER	CHAR(1)		NOT NULL,
	CNTRY_ID	CHAR(3)		NOT NULL,	
	PRIMARY KEY(DIR_ID),
	FOREIGN KEY(CNTRY_ID) REFERENCES COUNTRY(CNTRY_ID),
	CONSTRAINT DIRECTORS_CK1  CHECK(DIR_GENDER='M' OR DIR_GENDER='F')
);

INSERT INTO DIRECTORS
VALUES ('100001','TOKAR','NORMAN', '25-NOV-1919','06-APR-1979','M','101');  

INSERT INTO DIRECTORS
VALUES ('100002','JEUNET','JEAN-PIERRE', '03-SEP-1953',NULL,'M','103');  

INSERT INTO DIRECTORS
VALUES ('100003','LEE','ANG', '23-OCT-1954',NULL,'M','102');  



CREATE TABLE STARS(
	STAR_ID		CHAR(6),
	STAR_LNAME	VARCHAR(15)	NOT NULL,
	STAR_FNAME	VARCHAR(15)	NOT NULL,
	STAR_BDATE	DATE		NOT NULL,
	STAR_DDATE	DATE		NULL,
	STAR_GENDER	CHAR(1)		NOT NULL,
	CNTRY_ID	CHAR(3)		NOT NULL,
	PLACE_BRN	VARCHAR(20)	NULL,
	CAUSE_DEATH	VARCHAR(100)	NULL,
	PRIMARY KEY(STAR_ID),
	FOREIGN KEY(CNTRY_ID) REFERENCES COUNTRY(CNTRY_ID),
	CONSTRAINT STARS_CK1 CHECK(STAR_GENDER = 'M' OR STAR_GENDER='F')
);

INSERT INTO STARS
VALUES ('300001','DUNCAN','SANDY','20-FEB-1946',NULL,'F','101','TEXAS',NULL);

INSERT INTO STARS
VALUES ('300002','YUN-FAT','CHOW','18-MAY-1955',NULL,'M','102','HONG KONG',NULL);

INSERT INTO STARS
VALUES ('300003','TAUTOU','AUDREY','09-AUG-1976',NULL,'M','103','BEAUMONT',NULL);



CREATE TABLE MOVIES(
	MOV_ID		CHAR(6),
	MOV_TITLE	VARCHAR(30)	NOT NULL,
	MOV_YEAR	CHAR(4)		NOT NULL,
	MOV_RATING	CHAR(5)		NOT NULL,
	MOV_LENGTH	NUMBER(3)		NULL,
	NUM_AWARDS	NUMBER(2)		NULL,
	WW_GROSS	NUMBER(19,2)	NULL,
	US_GROSS	NUMBER(19,2)	NULL,
	CATGRY_ID	CHAR(3)		NOT NULL,
	CNTRY_ID	CHAR(3)		NOT NULL,
	DIR_ID		CHAR(6)		NOT NULL,
	PRIMARY KEY(MOV_ID),
	FOREIGN KEY(CATGRY_ID) REFERENCES CATEGORY(CATGRY_ID),
	FOREIGN KEY(CNTRY_ID) REFERENCES COUNTRY(CNTRY_ID),
	FOREIGN KEY(DIR_ID) REFERENCES DIRECTORS(DIR_ID),
	CONSTRAINT MOVIES_CK1 CHECK(MOV_YEAR BETWEEN '1920' AND '2050')
);

INSERT INTO MOVIES
VALUES('200001','AMELIE','2001','R','122',54,'33201661.00','173921954.00','202','103','100002');

INSERT INTO MOVIES
VALUES('200002','CAT FROM OUTER SPACE','1978','G','104',NULL,NULL,NULL,'201','101','100001');

INSERT INTO MOVIES
VALUES('200003','CROUCHING TIGER, HIDDEN DRAGON','2000','PG-13','120',87,128067808,'213525736.00','203','102','100003');



CREATE TABLE STAR_AWARDS(
	MOV_ID		CHAR(6),
	STAR_ID		CHAR(6),
	BEST_MALE	CHAR(1)		NULL,
	BEST_FEMALE	CHAR(1)		NULL,
	SUPPORT_MALE	CHAR(1)		NULL,
	SUPPORT_FEMALE	CHAR(1)		NULL,
	PRIMARY KEY(MOV_ID, STAR_ID),
	FOREIGN KEY(MOV_ID) REFERENCES MOVIES(MOV_ID),
	FOREIGN KEY(STAR_ID) REFERENCES STARS(STAR_ID),
	CONSTRAINT STAR_AWARDS_CK1 CHECK(BEST_MALE = 'W' OR BEST_MALE ='N'),
	CONSTRAINT STAR_AWARDS_CK2 CHECK(BEST_FEMALE = 'W' OR BEST_FEMALE ='N'),
	CONSTRAINT STAR_AWARDS_CK3 CHECK(SUPPORT_MALE = 'W' OR SUPPORT_MALE ='N'),
	CONSTRAINT STAR_AWARDS_CK4 CHECK(SUPPORT_FEMALE = 'W' OR SUPPORT_FEMALE = 'N')
);

INSERT INTO STAR_AWARDS
VALUES ('200001','300003',NULL,'W',NULL,NULL);

INSERT INTO STAR_AWARDS
VALUES ('200002','300001',NULL,NULL,NULL,'N');

INSERT INTO STAR_AWARDS
VALUES ('200003','300002',NULL,NULL,'W',NULL);



CREATE TABLE DIR_AWARDS(
	MOV_ID		CHAR(6),
	DIR_ID		CHAR(6),
	BEST_DIR	CHAR(1)		NULL,
	PRIMARY KEY(MOV_ID, DIR_ID),
	FOREIGN KEY(MOV_ID) REFERENCES MOVIES(MOV_ID),
	FOREIGN KEY(DIR_ID) REFERENCES DIRECTORS(DIR_ID),
	CONSTRAINT DIR_AWARDS_CK1 CHECK(BEST_DIR = 'W' OR BEST_DIR ='N')
);

INSERT INTO DIR_AWARDS
VALUES ('200001','100002','W');

INSERT INTO DIR_AWARDS
VALUES ('200002','100001','N');

INSERT INTO DIR_AWARDS
VALUES ('200003','100003','W');



CREATE TABLE INVOICE(
	INV_NUM		CHAR(6),
	CUST_ID		CHAR(6),
	MOV_ID		CHAR(6),
	INV_DATE	DATE		NOT NULL,
	RETURN_DATE	DATE		NOT NULL,
	RENT_FEE	NUMBER(7,2)	NOT NULL,
	PAY_TYPE	CHAR(2)		NOT NULL,
	PRIMARY KEY(INV_NUM),
	FOREIGN KEY(MOV_ID) REFERENCES MOVIES(MOV_ID),
	FOREIGN KEY(CUST_ID) REFERENCES CUSTOMERS(CUST_ID),
	CONSTRAINT INVOICE_CK1 CHECK(PAY_TYPE = ANY('DC','CC','CK','CH'))
);

INSERT INTO INVOICE
VALUES ('500001','400002','200001','19-APR-2013','21-APR-2013',6.00,'CK');

INSERT INTO INVOICE
VALUES ('500002','400001','200003','12-MAR-2013','14-MAR-2013',10.00,'CH');

INSERT INTO INVOICE
VALUES ('500003','400003','200002','05-FEB-2013','07-FEB-2013',20.00,'CC');



CREATE TABLE RENTED(
	RENTED_ID	CHAR(6),
	INV_NUM		CHAR(6),
	MOV_ID		CHAR(6),
	PRIMARY KEY(RENTED_ID),
	FOREIGN KEY(INV_NUM) REFERENCES INVOICE(INV_NUM),
	FOREIGN KEY(MOV_ID) REFERENCES MOVIES(MOV_ID)
);

INSERT INTO RENTED
VALUES ('600001', '500001','200001');

INSERT INTO RENTED
VALUES ('600002','500002','200003');

INSERT INTO RENTED
VALUES ('600003','500003','200002');


SELECT * FROM CUSTOMERS;
SELECT * FROM COUNTRY;
SELECT * FROM CATEGORY;
SELECT * FROM DIRECTORS;
SELECT * FROM STARS;
SELECT * FROM MOVIES;
SELECT * FROM STAR_AWARDS;
SELECT * FROM DIR_AWARDS;
SELECT * FROM INVOICE;
SELECT * FROM RENTED;